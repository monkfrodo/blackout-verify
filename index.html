<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Verificação - Blackout</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Crimson+Text:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-dark: #0a0a0c;
            --bg-card: #12121a;
            --gold: #c9a227;
            --gold-light: #e8c547;
            --gold-dim: #8a6f1a;
            --text: #d4d4d8;
            --text-dim: #71717a;
            --red: #dc2626;
            --green: #22c55e;
            --border: #27272a;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Crimson Text', Georgia, serif;
            background: var(--bg-dark);
            color: var(--text);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            background-image: 
                radial-gradient(ellipse at 50% 0%, rgba(201, 162, 39, 0.08) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(201, 162, 39, 0.04) 0%, transparent 30%);
        }

        .container {
            width: 100%;
            max-width: 480px;
        }

        /* Language switcher */
        .lang-switcher {
            display: flex;
            justify-content: center;
            gap: 12px;
            margin-bottom: 16px;
        }

        .lang-btn {
            background: transparent;
            border: 2px solid transparent;
            border-radius: 4px;
            padding: 4px;
            cursor: pointer;
            opacity: 0.5;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .lang-btn:hover {
            opacity: 0.8;
        }

        .lang-btn.active {
            opacity: 1;
            border-color: var(--gold);
        }

        .lang-btn img {
            width: 32px;
            height: 24px;
            border-radius: 2px;
            object-fit: cover;
        }

        .card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 4px;
            padding: 40px;
            position: relative;
            overflow: hidden;
        }

        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, transparent, var(--gold), transparent);
        }

        .guild-crest {
            text-align: center;
            margin-bottom: 32px;
        }

        .guild-crest svg {
            width: 64px;
            height: 64px;
            fill: var(--gold);
            opacity: 0.9;
        }

        h1 {
            font-family: 'Cinzel', serif;
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--gold);
            text-align: center;
            letter-spacing: 0.15em;
            text-transform: uppercase;
            margin-bottom: 8px;
        }

        .subtitle {
            text-align: center;
            color: var(--text-dim);
            font-size: 0.95rem;
            font-style: italic;
            margin-bottom: 32px;
        }

        /* Progress bar */
        .progress {
            display: flex;
            justify-content: center;
            gap: 8px;
            margin-bottom: 32px;
        }

        .progress-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: var(--border);
            transition: all 0.3s;
        }

        .progress-dot.active {
            background: var(--gold);
            box-shadow: 0 0 8px rgba(201, 162, 39, 0.5);
        }

        .progress-dot.completed {
            background: var(--green);
        }

        /* Steps */
        .step {
            display: none;
        }

        .step.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Form elements */
        .form-group {
            margin-bottom: 24px;
        }

        label {
            display: block;
            font-size: 0.85rem;
            color: var(--text-dim);
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 0.1em;
        }

        .step-title {
            font-family: 'Cinzel', serif;
            font-size: 1.1rem;
            color: var(--text);
            margin-bottom: 8px;
        }

        .step-description {
            font-size: 0.9rem;
            color: var(--text-dim);
            margin-bottom: 20px;
            line-height: 1.5;
        }

        input[type="text"],
        input[type="tel"] {
            width: 100%;
            padding: 14px 16px;
            background: var(--bg-dark);
            border: 1px solid var(--border);
            border-radius: 3px;
            color: var(--text);
            font-family: 'Crimson Text', serif;
            font-size: 1.1rem;
            transition: border-color 0.2s, box-shadow 0.2s;
        }

        input:focus {
            outline: none;
            border-color: var(--gold-dim);
            box-shadow: 0 0 0 3px rgba(201, 162, 39, 0.1);
        }

        input::placeholder {
            color: var(--text-dim);
            opacity: 0.5;
        }

        /* Phone input with country */
        .phone-input-wrapper {
            display: flex;
            gap: 8px;
        }

        .country-select {
            position: relative;
            flex-shrink: 0;
        }

        .country-select-btn {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 14px 12px;
            background: var(--bg-dark);
            border: 1px solid var(--border);
            border-radius: 3px;
            color: var(--text);
            font-family: 'Crimson Text', serif;
            font-size: 1rem;
            cursor: pointer;
            transition: border-color 0.2s;
            min-width: 110px;
        }

        .country-select-btn:hover {
            border-color: var(--gold-dim);
        }

        .country-select-btn img {
            width: 24px;
            height: 18px;
            border-radius: 2px;
            object-fit: cover;
        }

        .country-select-btn .dial-code {
            color: var(--text-dim);
        }

        .country-select-btn .arrow {
            margin-left: auto;
            font-size: 0.7rem;
            color: var(--text-dim);
        }

        .country-dropdown {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 3px;
            margin-top: 4px;
            max-height: 200px;
            overflow-y: auto;
            z-index: 100;
            display: none;
        }

        .country-dropdown.open {
            display: block;
        }

        .country-option {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px 12px;
            cursor: pointer;
            transition: background 0.2s;
        }

        .country-option:hover {
            background: rgba(201, 162, 39, 0.1);
        }

        .country-option img {
            width: 24px;
            height: 18px;
            border-radius: 2px;
            object-fit: cover;
        }

        .country-option .name {
            flex: 1;
            font-size: 0.95rem;
        }

        .country-option .dial {
            color: var(--text-dim);
            font-size: 0.9rem;
        }

        .phone-input-wrapper input[type="tel"] {
            flex: 1;
        }

        .btn {
            width: 100%;
            padding: 14px 24px;
            background: linear-gradient(135deg, var(--gold-dim) 0%, var(--gold) 100%);
            border: none;
            border-radius: 3px;
            color: var(--bg-dark);
            font-family: 'Cinzel', serif;
            font-size: 0.9rem;
            font-weight: 700;
            letter-spacing: 0.1em;
            text-transform: uppercase;
            cursor: pointer;
            transition: all 0.2s;
        }

        .btn:hover:not(:disabled) {
            background: linear-gradient(135deg, var(--gold) 0%, var(--gold-light) 100%);
            transform: translateY(-1px);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .btn-secondary {
            background: transparent;
            border: 1px solid var(--border);
            color: var(--text-dim);
            margin-top: 12px;
        }

        .btn-secondary:hover:not(:disabled) {
            background: rgba(255,255,255,0.03);
            border-color: var(--text-dim);
            color: var(--text);
        }

        /* Código de verificação */
        .code-display {
            background: var(--bg-dark);
            border: 2px dashed var(--gold-dim);
            border-radius: 4px;
            padding: 24px;
            text-align: center;
            margin: 24px 0;
        }

        .code-label {
            font-size: 0.8rem;
            color: var(--text-dim);
            text-transform: uppercase;
            letter-spacing: 0.1em;
            margin-bottom: 8px;
        }

        .code-value {
            font-family: 'Cinzel', serif;
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--gold);
            letter-spacing: 0.2em;
            user-select: all;
            cursor: pointer;
        }

        .code-hint {
            font-size: 0.85rem;
            color: var(--text-dim);
            margin-top: 8px;
        }

        .instructions {
            background: rgba(201, 162, 39, 0.05);
            border-left: 3px solid var(--gold-dim);
            padding: 16px;
            margin: 24px 0;
            font-size: 0.95rem;
            line-height: 1.7;
        }

        .instructions ol {
            margin-left: 20px;
        }

        .instructions li {
            margin-bottom: 8px;
        }

        .instructions a {
            color: var(--gold);
            text-decoration: none;
        }

        .instructions a:hover {
            text-decoration: underline;
        }

        /* Character info */
        .char-info {
            background: var(--bg-dark);
            border-radius: 4px;
            padding: 20px;
            margin: 20px 0;
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .char-avatar {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, var(--bg-card) 0%, var(--border) 100%);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            border: 1px solid var(--border);
            overflow: hidden;
        }

        .char-avatar img {
            width: 64px;
            height: 64px;
            image-rendering: pixelated;
            image-rendering: crisp-edges;
            object-fit: contain;
        }

        .char-details {
            flex: 1;
            min-width: 0;
        }

        .char-name {
            font-family: 'Cinzel', serif;
            font-size: 1.1rem;
            color: var(--gold);
            margin-bottom: 4px;
        }

        .char-meta {
            font-size: 0.85rem;
            color: var(--text-dim);
        }

        /* Resultado */
        .result {
            text-align: center;
            padding: 20px 0;
        }

        .result-icon {
            width: 80px;
            height: 80px;
            margin: 0 auto 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .result-icon.success {
            background: rgba(34, 197, 94, 0.1);
            border: 2px solid var(--green);
        }

        .result-icon.error {
            background: rgba(220, 38, 38, 0.1);
            border: 2px solid var(--red);
        }

        .result-icon svg {
            width: 40px;
            height: 40px;
        }

        .result-icon.success svg {
            fill: var(--green);
        }

        .result-icon.error svg {
            fill: var(--red);
        }

        .result-title {
            font-family: 'Cinzel', serif;
            font-size: 1.3rem;
            margin-bottom: 12px;
        }

        .result-title.success {
            color: var(--green);
        }

        .result-title.error {
            color: var(--red);
        }

        .result-message {
            color: var(--text-dim);
            line-height: 1.6;
            margin-bottom: 24px;
        }

        .whatsapp-link {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            padding: 16px 32px;
            background: #25D366;
            color: white;
            text-decoration: none;
            border-radius: 4px;
            font-family: 'Cinzel', serif;
            font-weight: 700;
            font-size: 0.95rem;
            letter-spacing: 0.05em;
            transition: all 0.2s;
        }

        .whatsapp-link:hover {
            background: #22c35e;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(37, 211, 102, 0.3);
        }

        .whatsapp-link svg {
            width: 24px;
            height: 24px;
            fill: currentColor;
        }

        /* Loading */
        .loading {
            display: none;
            text-align: center;
            padding: 40px 0;
        }

        .loading.active {
            display: block;
        }

        .spinner {
            width: 40px;
            height: 40px;
            border: 3px solid var(--border);
            border-top-color: var(--gold);
            border-radius: 50%;
            margin: 0 auto 16px;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .loading-text {
            color: var(--text-dim);
            font-style: italic;
        }

        /* Error message */
        .error-msg {
            background: rgba(220, 38, 38, 0.1);
            border: 1px solid rgba(220, 38, 38, 0.3);
            border-radius: 4px;
            padding: 12px 16px;
            color: var(--red);
            font-size: 0.9rem;
            margin-top: 16px;
            display: none;
        }

        .error-msg.visible {
            display: block;
        }

        /* Summary */
        .summary {
            background: var(--bg-dark);
            border-radius: 4px;
            padding: 16px;
            margin: 16px 0;
        }

        .summary-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid var(--border);
        }

        .summary-item:last-child {
            border-bottom: none;
        }

        .summary-label {
            color: var(--text-dim);
            font-size: 0.85rem;
        }

        .summary-value {
            color: var(--text);
            font-weight: 600;
        }

        /* Footer */
        .footer {
            text-align: center;
            margin-top: 24px;
            padding-top: 24px;
            border-top: 1px solid var(--border);
            font-size: 0.8rem;
            color: var(--text-dim);
        }

        .footer a {
            color: var(--gold-dim);
            text-decoration: none;
        }

        .footer a:hover {
            color: var(--gold);
        }

        /* Cache warning */
        .cache-warning {
            background: rgba(201, 162, 39, 0.1);
            border: 1px solid rgba(201, 162, 39, 0.3);
            border-radius: 4px;
            padding: 12px 16px;
            font-size: 0.9rem;
            margin: 16px 0;
            color: var(--gold-light);
        }

        /* Verification status */
        .verify-status {
            text-align: center;
            padding: 32px 0;
        }

        .verify-spinner {
            width: 60px;
            height: 60px;
            border: 4px solid var(--border);
            border-top-color: var(--gold);
            border-radius: 50%;
            margin: 0 auto 24px;
            animation: spin 1s linear infinite;
        }

        .verify-attempt {
            font-family: 'Cinzel', serif;
            font-size: 1.1rem;
            color: var(--gold);
            margin-bottom: 8px;
        }

        .verify-countdown {
            font-size: 0.95rem;
            color: var(--text-dim);
        }

        .verify-countdown span {
            font-weight: 700;
            color: var(--gold-light);
        }

        .verify-info {
            text-align: center;
            margin: 24px 0;
            line-height: 1.6;
        }

        .verify-info strong {
            color: var(--gold);
        }

        .verify-hint {
            font-size: 0.85rem;
            color: var(--text-dim);
            margin-top: 8px;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Language Switcher -->
        <div class="lang-switcher">
            <button class="lang-btn active" data-lang="pt" title="Português">
                <img src="https://flagcdn.com/w40/br.png" alt="Português">
            </button>
            <button class="lang-btn" data-lang="en" title="English">
                <img src="https://flagcdn.com/w40/us.png" alt="English">
            </button>
            <button class="lang-btn" data-lang="es" title="Español">
                <img src="https://flagcdn.com/w40/mx.png" alt="Español">
            </button>
        </div>

        <div class="card">
            <div class="guild-crest">
                <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                    <path d="M50 5 L90 25 L90 55 C90 75 70 90 50 95 C30 90 10 75 10 55 L10 25 Z" fill="none" stroke="currentColor" stroke-width="3"/>
                    <path d="M50 20 L65 35 L50 50 L35 35 Z" fill="currentColor" opacity="0.3"/>
                    <path d="M35 45 L50 60 L65 45" fill="none" stroke="currentColor" stroke-width="2"/>
                    <path d="M50 60 L50 75" stroke="currentColor" stroke-width="2"/>
                    <circle cx="50" cy="35" r="5" fill="currentColor"/>
                </svg>
            </div>

            <h1>Blackout</h1>
            <p class="subtitle" data-i18n="subtitle">Verificação de Acesso</p>

            <!-- Progress -->
            <div class="progress">
                <div class="progress-dot active" data-step="1"></div>
                <div class="progress-dot" data-step="2"></div>
                <div class="progress-dot" data-step="3"></div>
                <div class="progress-dot" data-step="4"></div>
                <div class="progress-dot" data-step="5"></div>
            </div>

            <!-- Step 1: Nick do personagem -->
            <div class="step active" id="step1">
                <div class="step-title" data-i18n="step1_title">Qual o nick do seu personagem?</div>
                <div class="step-description" data-i18n="step1_desc">Digite o nome exato como aparece no jogo.</div>
                <div class="form-group">
                    <input type="text" id="inputNick" data-i18n-placeholder="step1_placeholder" placeholder="Ex: Hecks Leads" autocomplete="off">
                </div>
                <button class="btn" id="btnStep1" data-i18n="btn_continue">Continuar</button>
                <div class="error-msg" id="error1"></div>
            </div>

            <!-- Step 2: Nome completo -->
            <div class="step" id="step2">
                <div class="char-info" id="charInfo">
                    <div class="char-avatar">
                        <img id="charOutfit" src="" alt="Outfit">
                    </div>
                    <div class="char-details">
                        <div class="char-name" id="charDisplayName"></div>
                        <div class="char-meta" id="charMeta"></div>
                    </div>
                </div>
                <div class="step-title" data-i18n="step2_title">Qual o seu nome completo?</div>
                <div class="step-description" data-i18n="step2_desc">Nome e sobrenome, por favor.</div>
                <div class="form-group">
                    <input type="text" id="inputName" data-i18n-placeholder="step2_placeholder" placeholder="Ex: João Silva" autocomplete="name">
                </div>
                <button class="btn" id="btnStep2" data-i18n="btn_continue">Continuar</button>
                <button class="btn btn-secondary" id="btnBack2" data-i18n="btn_back">← Voltar</button>
                <div class="error-msg" id="error2"></div>
            </div>

            <!-- Step 3: Telefone -->
            <div class="step" id="step3">
                <div class="step-title" data-i18n="step3_title">Qual o seu WhatsApp?</div>
                <div class="step-description" data-i18n="step3_desc">Este será o número liberado no grupo.</div>
                <div class="form-group">
                    <div class="phone-input-wrapper">
                        <div class="country-select">
                            <button type="button" class="country-select-btn" id="countrySelectBtn">
                                <img src="https://flagcdn.com/w40/br.png" alt="" id="selectedFlag">
                                <span class="dial-code" id="selectedDialCode">+55</span>
                                <span class="arrow">▼</span>
                            </button>
                            <div class="country-dropdown" id="countryDropdown"></div>
                        </div>
                        <input type="tel" id="inputPhone" data-i18n-placeholder="step3_placeholder" placeholder="11 99999-9999" autocomplete="tel">
                    </div>
                </div>
                <button class="btn" id="btnStep3" data-i18n="btn_continue">Continuar</button>
                <button class="btn btn-secondary" id="btnBack3" data-i18n="btn_back">← Voltar</button>
                <div class="error-msg" id="error3"></div>
            </div>

            <!-- Step 4: Código de verificação -->
            <div class="step" id="step4">
                <div class="step-title" data-i18n="step4_title">Verificação do personagem</div>
                <div class="step-description" data-i18n="step4_desc">Agora precisamos confirmar que o personagem é seu.</div>

                <div class="code-display">
                    <div class="code-label" data-i18n="code_label">Seu código de verificação</div>
                    <div class="code-value" id="verifyCode" title="Clique para copiar"></div>
                    <div class="code-hint" data-i18n="code_hint">Clique no código para copiar</div>
                </div>

                <div class="instructions">
                    <ol>
                        <li data-i18n="inst_1">Acesse o <a href="https://www.tibia.com/account/?subtopic=accountmanagement" target="_blank">site oficial do Tibia</a></li>
                        <li data-i18n="inst_2">Vá em <strong>Account Management</strong></li>
                        <li data-i18n="inst_3">Encontre seu personagem e clique em <strong>Edit</strong></li>
                        <li data-i18n="inst_4">Cole o código acima no campo <strong>Comment</strong></li>
                        <li data-i18n="inst_5">Salve e volte aqui para verificar</li>
                    </ol>
                </div>

                <div class="cache-warning" data-i18n="cache_warning">
                    <strong>⏱ Importante:</strong> Após salvar no site do Tibia, pode levar até 5 minutos para a verificação funcionar. O sistema tentará automaticamente várias vezes.
                </div>

                <button class="btn" id="btnStep4" data-i18n="btn_verify">Verificar Agora</button>
                <button class="btn btn-secondary" id="btnBack4" data-i18n="btn_back">← Voltar</button>
                <div class="error-msg" id="error4"></div>
            </div>
            
            <!-- Step 4b: Verificando com retry -->
            <div class="step" id="step4verifying">
                <div class="step-title" data-i18n="verifying_title">Verificando...</div>
                
                <div class="verify-status">
                    <div class="verify-spinner"></div>
                    <div class="verify-attempt"><span data-i18n="attempt">Tentativa</span> <span id="attemptNumber">1</span> <span data-i18n="of">de</span> <span id="maxAttempts">10</span></div>
                    <div class="verify-countdown"><span data-i18n="next_attempt">Próxima tentativa em</span> <span id="countdown">30</span>s</div>
                </div>
                
                <div class="verify-info">
                    <p><span data-i18n="searching_code">Buscando o código</span> <strong id="searchingCode"></strong> <span data-i18n="in_comment">na comment do personagem.</span></p>
                    <p class="verify-hint" data-i18n="verify_hint">A API do Tibia pode levar até 5 minutos para atualizar. Aguarde...</p>
                </div>

                <button class="btn btn-secondary" id="btnCancelVerify" data-i18n="btn_cancel">Cancelar</button>
            </div>

            <!-- Step 5: Sucesso -->
            <div class="step" id="step5success">
                <div class="result">
                    <div class="result-icon success">
                        <svg viewBox="0 0 24 24"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/></svg>
                    </div>
                    <h2 class="result-title success" data-i18n="success_title">Verificado!</h2>
                    <p class="result-message" data-i18n="success_message">
                        Bem-vindo à Blackout, guerreiro.<br>
                        Clique abaixo para entrar no grupo.
                    </p>
                    <a href="#" class="whatsapp-link" id="whatsappLink" target="_blank">
                        <svg viewBox="0 0 24 24"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/></svg>
                        <span data-i18n="btn_join">Entrar no Grupo</span>
                    </a>
                </div>

                <div class="summary">
                    <div class="summary-item">
                        <span class="summary-label" data-i18n="summary_char">Personagem</span>
                        <span class="summary-value" id="summaryNick"></span>
                    </div>
                    <div class="summary-item">
                        <span class="summary-label" data-i18n="summary_name">Nome</span>
                        <span class="summary-value" id="summaryName"></span>
                    </div>
                    <div class="summary-item">
                        <span class="summary-label">WhatsApp</span>
                        <span class="summary-value" id="summaryPhone"></span>
                    </div>
                </div>
            </div>

            <!-- Step 5: Erro na verificação -->
            <div class="step" id="step5error">
                <div class="result">
                    <div class="result-icon error">
                        <svg viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
                    </div>
                    <h2 class="result-title error" data-i18n="error_title">Código não encontrado</h2>
                    <p class="result-message" id="errorMessage" data-i18n="error_message">
                        O código de verificação não foi encontrado na comment do personagem.
                        Verifique se você salvou as alterações e tente novamente.
                    </p>
                </div>
                <button class="btn" id="btnRetry" data-i18n="btn_retry">Tentar Novamente</button>
                <button class="btn btn-secondary" id="btnBackFromError" data-i18n="btn_restart">← Voltar ao início</button>
            </div>

            <!-- Loading -->
            <div class="loading" id="loading">
                <div class="spinner"></div>
                <div class="loading-text" id="loadingText" data-i18n="loading">Consultando API do Tibia...</div>
            </div>

            <div class="footer">
                <a href="https://www.tibia.com/community/?subtopic=guilds&page=view&GuildName=Blackout" target="_blank">Blackout Guild</a> · Luminera
            </div>
        </div>
    </div>

    <script>
        // ============================================
        // CONFIGURAÇÃO - EDITE APENAS ESTA SEÇÃO
        // ============================================
        const CONFIG = {
            // Link do grupo/comunidade do WhatsApp
            whatsappLink: 'https://chat.whatsapp.com/IVaUmFRyE51KOWbNdWCaNV',
            
            // URL do Google Apps Script (Web App URL)
            googleScriptUrl: 'https://script.google.com/macros/s/AKfycbym8XFgI4L2rgjBDZ8yAQV3_JvLyYbH_utXyuG-ATPQg2gBitC2VMf-bAcuVaL3pRCd/exec',
            
            // Prefixo do código de verificação
            codePrefix: 'BLACKOUT',
            
            // Tempo em ms para cache do código (24 horas)
            codeExpiry: 24 * 60 * 60 * 1000
        };
        // ============================================

        // Países disponíveis
        const COUNTRIES = [
            { code: 'br', name: 'Brasil', dial: '+55', flag: 'br' },
            { code: 'us', name: 'United States', dial: '+1', flag: 'us' },
            { code: 'mx', name: 'México', dial: '+52', flag: 'mx' },
            { code: 'ar', name: 'Argentina', dial: '+54', flag: 'ar' },
            { code: 'co', name: 'Colombia', dial: '+57', flag: 'co' },
            { code: 'cl', name: 'Chile', dial: '+56', flag: 'cl' },
            { code: 'pe', name: 'Perú', dial: '+51', flag: 'pe' },
            { code: 've', name: 'Venezuela', dial: '+58', flag: 've' },
            { code: 'ec', name: 'Ecuador', dial: '+593', flag: 'ec' },
            { code: 'pt', name: 'Portugal', dial: '+351', flag: 'pt' },
            { code: 'es', name: 'España', dial: '+34', flag: 'es' },
            { code: 'de', name: 'Deutschland', dial: '+49', flag: 'de' },
            { code: 'pl', name: 'Polska', dial: '+48', flag: 'pl' },
            { code: 'gb', name: 'United Kingdom', dial: '+44', flag: 'gb' },
            { code: 'se', name: 'Sverige', dial: '+46', flag: 'se' },
        ];

        // Traduções
        const I18N = {
            pt: {
                subtitle: 'Verificação de Acesso',
                step1_title: 'Qual o nick do seu personagem?',
                step1_desc: 'Digite o nome exato como aparece no jogo.',
                step1_placeholder: 'Ex: Hecks Leads',
                step2_title: 'Qual o seu nome completo?',
                step2_desc: 'Nome e sobrenome, por favor.',
                step2_placeholder: 'Ex: João Silva',
                step3_title: 'Qual o seu WhatsApp?',
                step3_desc: 'Este será o número liberado no grupo.',
                step3_placeholder: '11 99999-9999',
                step4_title: 'Verificação do personagem',
                step4_desc: 'Agora precisamos confirmar que o personagem é seu.',
                code_label: 'Seu código de verificação',
                code_hint: 'Clique no código para copiar',
                inst_1: 'Acesse o <a href="https://www.tibia.com/account/?subtopic=accountmanagement" target="_blank">site oficial do Tibia</a>',
                inst_2: 'Vá em <strong>Account Management</strong>',
                inst_3: 'Encontre seu personagem e clique em <strong>Edit</strong>',
                inst_4: 'Cole o código acima no campo <strong>Comment</strong>',
                inst_5: 'Salve e volte aqui para verificar',
                cache_warning: '<strong>⏱ Importante:</strong> Após salvar no site do Tibia, pode levar até 5 minutos para a verificação funcionar. O sistema tentará automaticamente várias vezes.',
                verifying_title: 'Verificando...',
                attempt: 'Tentativa',
                of: 'de',
                next_attempt: 'Próxima tentativa em',
                searching_code: 'Buscando o código',
                in_comment: 'na comment do personagem.',
                verify_hint: 'A API do Tibia pode levar até 5 minutos para atualizar. Aguarde...',
                success_title: 'Verificado!',
                success_message: 'Bem-vindo à Blackout, guerreiro.<br>Clique abaixo para entrar no grupo.',
                error_title: 'Código não encontrado',
                error_message: 'O código de verificação não foi encontrado na comment do personagem. Verifique se você salvou as alterações e tente novamente.',
                summary_char: 'Personagem',
                summary_name: 'Nome',
                btn_continue: 'Continuar',
                btn_back: '← Voltar',
                btn_verify: 'Verificar Agora',
                btn_cancel: 'Cancelar',
                btn_retry: 'Tentar Novamente',
                btn_restart: '← Voltar ao início',
                btn_join: 'Entrar no Grupo',
                loading: 'Consultando API do Tibia...',
                err_nick_empty: 'Digite o nome do personagem',
                err_char_not_found: 'Personagem não encontrado',
                err_name_empty: 'Digite seu nome completo',
                err_name_surname: 'Digite nome e sobrenome',
                err_phone_invalid: 'Digite um número válido',
            },
            en: {
                subtitle: 'Access Verification',
                step1_title: 'What is your character name?',
                step1_desc: 'Enter the exact name as it appears in the game.',
                step1_placeholder: 'E.g.: Hecks Leads',
                step2_title: 'What is your full name?',
                step2_desc: 'First and last name, please.',
                step2_placeholder: 'E.g.: John Smith',
                step3_title: 'What is your WhatsApp number?',
                step3_desc: 'This number will be granted access to the group.',
                step3_placeholder: '555 123-4567',
                step4_title: 'Character Verification',
                step4_desc: 'Now we need to confirm this character is yours.',
                code_label: 'Your verification code',
                code_hint: 'Click the code to copy',
                inst_1: 'Go to the <a href="https://www.tibia.com/account/?subtopic=accountmanagement" target="_blank">official Tibia website</a>',
                inst_2: 'Navigate to <strong>Account Management</strong>',
                inst_3: 'Find your character and click <strong>Edit</strong>',
                inst_4: 'Paste the code above in the <strong>Comment</strong> field',
                inst_5: 'Save and come back here to verify',
                cache_warning: '<strong>⏱ Important:</strong> After saving on the Tibia website, it may take up to 5 minutes for verification to work. The system will automatically retry several times.',
                verifying_title: 'Verifying...',
                attempt: 'Attempt',
                of: 'of',
                next_attempt: 'Next attempt in',
                searching_code: 'Searching for code',
                in_comment: 'in character comment.',
                verify_hint: 'The Tibia API may take up to 5 minutes to update. Please wait...',
                success_title: 'Verified!',
                success_message: 'Welcome to Blackout, warrior.<br>Click below to join the group.',
                error_title: 'Code not found',
                error_message: 'The verification code was not found in the character comment. Make sure you saved the changes and try again.',
                summary_char: 'Character',
                summary_name: 'Name',
                btn_continue: 'Continue',
                btn_back: '← Back',
                btn_verify: 'Verify Now',
                btn_cancel: 'Cancel',
                btn_retry: 'Try Again',
                btn_restart: '← Start Over',
                btn_join: 'Join Group',
                loading: 'Querying Tibia API...',
                err_nick_empty: 'Enter character name',
                err_char_not_found: 'Character not found',
                err_name_empty: 'Enter your full name',
                err_name_surname: 'Enter first and last name',
                err_phone_invalid: 'Enter a valid number',
            },
            es: {
                subtitle: 'Verificación de Acceso',
                step1_title: '¿Cuál es el nombre de tu personaje?',
                step1_desc: 'Escribe el nombre exacto como aparece en el juego.',
                step1_placeholder: 'Ej: Hecks Leads',
                step2_title: '¿Cuál es tu nombre completo?',
                step2_desc: 'Nombre y apellido, por favor.',
                step2_placeholder: 'Ej: Juan García',
                step3_title: '¿Cuál es tu WhatsApp?',
                step3_desc: 'Este número tendrá acceso al grupo.',
                step3_placeholder: '55 1234-5678',
                step4_title: 'Verificación del personaje',
                step4_desc: 'Ahora necesitamos confirmar que el personaje es tuyo.',
                code_label: 'Tu código de verificación',
                code_hint: 'Haz clic en el código para copiar',
                inst_1: 'Accede al <a href="https://www.tibia.com/account/?subtopic=accountmanagement" target="_blank">sitio oficial de Tibia</a>',
                inst_2: 'Ve a <strong>Account Management</strong>',
                inst_3: 'Encuentra tu personaje y haz clic en <strong>Edit</strong>',
                inst_4: 'Pega el código en el campo <strong>Comment</strong>',
                inst_5: 'Guarda y vuelve aquí para verificar',
                cache_warning: '<strong>⏱ Importante:</strong> Después de guardar en el sitio de Tibia, puede tomar hasta 5 minutos para que la verificación funcione. El sistema intentará automáticamente varias veces.',
                verifying_title: 'Verificando...',
                attempt: 'Intento',
                of: 'de',
                next_attempt: 'Próximo intento en',
                searching_code: 'Buscando el código',
                in_comment: 'en el comentario del personaje.',
                verify_hint: 'La API de Tibia puede tardar hasta 5 minutos en actualizar. Espera...',
                success_title: '¡Verificado!',
                success_message: 'Bienvenido a Blackout, guerrero.<br>Haz clic abajo para entrar al grupo.',
                error_title: 'Código no encontrado',
                error_message: 'El código de verificación no se encontró en el comentario del personaje. Verifica que guardaste los cambios e intenta de nuevo.',
                summary_char: 'Personaje',
                summary_name: 'Nombre',
                btn_continue: 'Continuar',
                btn_back: '← Volver',
                btn_verify: 'Verificar Ahora',
                btn_cancel: 'Cancelar',
                btn_retry: 'Intentar de Nuevo',
                btn_restart: '← Volver al inicio',
                btn_join: 'Entrar al Grupo',
                loading: 'Consultando API de Tibia...',
                err_nick_empty: 'Escribe el nombre del personaje',
                err_char_not_found: 'Personaje no encontrado',
                err_name_empty: 'Escribe tu nombre completo',
                err_name_surname: 'Escribe nombre y apellido',
                err_phone_invalid: 'Escribe un número válido',
            }
        };

        let currentLang = 'pt';
        let selectedCountry = COUNTRIES[0]; // Brasil default

        // Estado da aplicação
        let state = {
            visitorId: generateVisitorId(),
            nick: '',
            characterData: null,
            fullName: '',
            phone: '',
            verificationCode: '',
            currentStep: 1
        };

        // Funções auxiliares
        const $ = id => document.getElementById(id);

        function t(key) {
            return I18N[currentLang][key] || I18N['pt'][key] || key;
        }

        function applyTranslations() {
            document.querySelectorAll('[data-i18n]').forEach(el => {
                const key = el.getAttribute('data-i18n');
                const text = t(key);
                if (text) el.innerHTML = text;
            });
            document.querySelectorAll('[data-i18n-placeholder]').forEach(el => {
                const key = el.getAttribute('data-i18n-placeholder');
                const text = t(key);
                if (text) el.placeholder = text;
            });
        }

        function setLanguage(lang) {
            currentLang = lang;
            localStorage.setItem('blackout_lang', lang);
            document.querySelectorAll('.lang-btn').forEach(btn => {
                btn.classList.toggle('active', btn.dataset.lang === lang);
            });
            applyTranslations();
            
            // Set default country based on language
            if (lang === 'en') selectCountry(COUNTRIES.find(c => c.code === 'us'));
            else if (lang === 'es') selectCountry(COUNTRIES.find(c => c.code === 'mx'));
            else selectCountry(COUNTRIES.find(c => c.code === 'br'));
        }

        function generateVisitorId() {
            const stored = localStorage.getItem('blackout_visitor_id');
            if (stored) return stored;
            const id = 'v_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
            localStorage.setItem('blackout_visitor_id', id);
            return id;
        }

        function generateCode(charName) {
            const key = `blackout_verify_${charName.toLowerCase()}`;
            const stored = localStorage.getItem(key);
            if (stored) {
                const { code, timestamp } = JSON.parse(stored);
                if (Date.now() - timestamp < CONFIG.codeExpiry) {
                    return code;
                }
            }
            
            const chars = 'ABCDEFGHJKLMNPQRSTUVWXYZ23456789';
            let suffix = '';
            for (let i = 0; i < 4; i++) {
                suffix += chars.charAt(Math.floor(Math.random() * chars.length));
            }
            const code = `${CONFIG.codePrefix}-${suffix}`;
            
            localStorage.setItem(key, JSON.stringify({
                code,
                timestamp: Date.now()
            }));
            
            return code;
        }

        async function fetchCharacter(name) {
            const response = await fetch(`https://api.tibiadata.com/v4/character/${encodeURIComponent(name)}`);
            if (!response.ok) throw new Error('API Error');
            
            const data = await response.json();
            if (!data.character || !data.character.character || !data.character.character.name) {
                throw new Error(t('err_char_not_found'));
            }
            
            return data.character;
        }

        async function logToSheet(action, data) {
            if (!CONFIG.googleScriptUrl || CONFIG.googleScriptUrl === 'COLE_A_URL_DO_SCRIPT_AQUI') {
                console.log('Log (não configurado):', action, data);
                return;
            }
            
            // Adiciona país e timestamp formatado
            const now = new Date();
            const payload = {
                action,
                timestamp: now.toISOString(),
                date: now.toLocaleDateString('pt-BR'),
                time: now.toLocaleTimeString('pt-BR'),
                visitorId: state.visitorId,
                country: selectedCountry ? selectedCountry.name : '',
                countryCode: selectedCountry ? selectedCountry.code : '',
                ...data
            };
            
            console.log('Enviando para planilha:', payload);
            
            try {
                // Método POST com fetch - mesmo método da v1 que funcionava
                fetch(CONFIG.googleScriptUrl, {
                    method: 'POST',
                    body: JSON.stringify(payload)
                }).catch(err => console.log('Fetch silent fail (normal):', err));
                
                console.log('Log enviado');
            } catch (error) {
                console.error('Erro ao enviar log:', error);
            }
        }

        function updateProgress(step, status = 'active') {
            document.querySelectorAll('.progress-dot').forEach((dot, index) => {
                const dotStep = index + 1;
                dot.classList.remove('active', 'completed');
                if (dotStep < step) dot.classList.add('completed');
                else if (dotStep === step) dot.classList.add(status === 'completed' ? 'completed' : 'active');
            });
        }

        function showStep(stepId) {
            document.querySelectorAll('.step').forEach(s => s.classList.remove('active'));
            $('loading').classList.remove('active');
            const step = $(stepId);
            if (step) step.classList.add('active');
        }

        function showLoading(text) {
            document.querySelectorAll('.step').forEach(s => s.classList.remove('active'));
            $('loadingText').textContent = text || t('loading');
            $('loading').classList.add('active');
        }

        function showError(elementId, message) {
            const el = $(elementId);
            el.textContent = message;
            el.classList.add('visible');
            setTimeout(() => el.classList.remove('visible'), 5000);
        }

        function clearErrors() {
            document.querySelectorAll('.error-msg').forEach(e => e.classList.remove('visible'));
        }

        // Country selector
        function buildCountryDropdown() {
            const dropdown = $('countryDropdown');
            dropdown.innerHTML = COUNTRIES.map(country => `
                <div class="country-option" data-code="${country.code}">
                    <img src="https://flagcdn.com/w40/${country.flag}.png" alt="${country.name}">
                    <span class="name">${country.name}</span>
                    <span class="dial">${country.dial}</span>
                </div>
            `).join('');
        }

        function selectCountry(country) {
            selectedCountry = country;
            $('selectedFlag').src = `https://flagcdn.com/w40/${country.flag}.png`;
            $('selectedDialCode').textContent = country.dial;
            $('countryDropdown').classList.remove('open');
        }

        // Event listeners
        document.querySelectorAll('.lang-btn').forEach(btn => {
            btn.addEventListener('click', () => setLanguage(btn.dataset.lang));
        });

        $('countrySelectBtn').addEventListener('click', (e) => {
            e.stopPropagation();
            $('countryDropdown').classList.toggle('open');
        });

        document.addEventListener('click', () => {
            $('countryDropdown').classList.remove('open');
        });

        $('countryDropdown').addEventListener('click', (e) => {
            const option = e.target.closest('.country-option');
            if (option) {
                const country = COUNTRIES.find(c => c.code === option.dataset.code);
                if (country) selectCountry(country);
            }
        });

        // Step 1: Nick
        $('btnStep1').addEventListener('click', async () => {
            clearErrors();
            const nick = $('inputNick').value.trim();
            
            if (!nick) {
                showError('error1', t('err_nick_empty'));
                return;
            }

            showLoading();

            try {
                const charData = await fetchCharacter(nick);
                state.nick = charData.character.name;
                state.characterData = charData;
                state.verificationCode = generateCode(state.nick);

                await logToSheet('step1_nick', {
                    nick: state.nick,
                    level: charData.character.level,
                    vocation: charData.character.vocation
                });

                $('charDisplayName').textContent = charData.character.name;
                $('charMeta').textContent = `Level ${charData.character.level} ${charData.character.vocation}`;
                
                // Monta URL do outfit com cores usando a API do Tibia
                const outfit = charData.character.outfit || {};
                const looktype = outfit.looktype || 128;
                const head = outfit.head || 0;
                const body = outfit.body || 0;
                const legs = outfit.legs || 0;
                const feet = outfit.feet || 0;
                const addons = outfit.addons || 0;
                
                // URL do outfit animado com cores corretas
                $('charOutfit').src = `https://static.tibia.com/images/charactertrade/outfits/${looktype}_${addons}_${head}_${body}_${legs}_${feet}.gif`;

                state.currentStep = 2;
                updateProgress(2);
                showStep('step2');
                $('inputName').focus();

            } catch (error) {
                showStep('step1');
                showError('error1', error.message || t('err_char_not_found'));
            }
        });

        // Step 2: Nome
        $('btnStep2').addEventListener('click', async () => {
            clearErrors();
            const name = $('inputName').value.trim();
            
            if (!name) {
                showError('error2', t('err_name_empty'));
                return;
            }

            if (!name.includes(' ')) {
                showError('error2', t('err_name_surname'));
                return;
            }

            state.fullName = name;

            await logToSheet('step2_name', {
                nick: state.nick,
                fullName: state.fullName
            });

            state.currentStep = 3;
            updateProgress(3);
            showStep('step3');
            $('inputPhone').focus();
        });

        $('btnBack2').addEventListener('click', () => {
            state.currentStep = 1;
            updateProgress(1);
            showStep('step1');
        });

        // Step 3: Telefone
        $('btnStep3').addEventListener('click', async () => {
            clearErrors();
            const phone = $('inputPhone').value.trim();
            const phoneNumbers = phone.replace(/\D/g, '');
            
            if (phoneNumbers.length < 7) {
                showError('error3', t('err_phone_invalid'));
                return;
            }

            state.phone = `${selectedCountry.dial} ${phone}`;

            await logToSheet('step3_phone', {
                nick: state.nick,
                fullName: state.fullName,
                phone: state.phone,
                country: selectedCountry.code
            });

            $('verifyCode').textContent = state.verificationCode;

            state.currentStep = 4;
            updateProgress(4);
            showStep('step4');
        });

        $('btnBack3').addEventListener('click', () => {
            state.currentStep = 2;
            updateProgress(2);
            showStep('step2');
        });

        // Step 4: Verificação
        $('verifyCode').addEventListener('click', () => {
            navigator.clipboard.writeText(state.verificationCode);
            $('verifyCode').style.color = '#22c55e';
            setTimeout(() => $('verifyCode').style.color = '', 500);
        });

        const VERIFY_CONFIG = {
            maxAttempts: 10,
            intervalSeconds: 30,
        };

        let verifyInterval = null;
        let countdownInterval = null;
        let currentAttempt = 0;
        let countdownValue = 0;

        function stopVerification() {
            if (verifyInterval) clearInterval(verifyInterval);
            if (countdownInterval) clearInterval(countdownInterval);
            verifyInterval = null;
            countdownInterval = null;
            currentAttempt = 0;
        }

        function updateCountdown() {
            countdownValue--;
            if (countdownValue >= 0) {
                $('countdown').textContent = countdownValue;
            }
        }

        async function attemptVerification() {
            currentAttempt++;
            $('attemptNumber').textContent = currentAttempt;
            $('countdown').textContent = VERIFY_CONFIG.intervalSeconds;
            countdownValue = VERIFY_CONFIG.intervalSeconds;

            try {
                const charData = await fetchCharacter(state.nick);
                const comment = charData.character.comment || '';
                
                if (comment.includes(state.verificationCode)) {
                    stopVerification();
                    
                    await logToSheet('verified', {
                        nick: state.nick,
                        fullName: state.fullName,
                        phone: state.phone,
                        level: charData.character.level,
                        vocation: charData.character.vocation,
                        verified: true,
                        attempts: currentAttempt
                    });

                    localStorage.removeItem(`blackout_verify_${state.nick.toLowerCase()}`);

                    $('summaryNick').textContent = state.nick;
                    $('summaryName').textContent = state.fullName;
                    $('summaryPhone').textContent = state.phone;
                    $('whatsappLink').href = CONFIG.whatsappLink;

                    state.currentStep = 5;
                    updateProgress(5, 'completed');
                    showStep('step5success');
                    return true;
                }
            } catch (error) {
                console.error('Attempt error:', currentAttempt, error);
            }

            if (currentAttempt >= VERIFY_CONFIG.maxAttempts) {
                stopVerification();
                
                await logToSheet('verification_failed', {
                    nick: state.nick,
                    fullName: state.fullName,
                    phone: state.phone,
                    expectedCode: state.verificationCode,
                    attempts: currentAttempt
                });

                showStep('step5error');
            }

            return false;
        }

        function startVerification() {
            currentAttempt = 0;
            $('maxAttempts').textContent = VERIFY_CONFIG.maxAttempts;
            $('searchingCode').textContent = state.verificationCode;
            
            showStep('step4verifying');
            
            attemptVerification();
            
            countdownValue = VERIFY_CONFIG.intervalSeconds;
            countdownInterval = setInterval(updateCountdown, 1000);
            
            verifyInterval = setInterval(() => {
                countdownValue = VERIFY_CONFIG.intervalSeconds;
                attemptVerification();
            }, VERIFY_CONFIG.intervalSeconds * 1000);
        }

        $('btnStep4').addEventListener('click', () => {
            clearErrors();
            startVerification();
        });

        $('btnCancelVerify').addEventListener('click', () => {
            stopVerification();
            updateProgress(4);
            showStep('step4');
        });

        $('btnBack4').addEventListener('click', () => {
            state.currentStep = 3;
            updateProgress(3);
            showStep('step3');
        });

        $('btnRetry').addEventListener('click', () => {
            updateProgress(4);
            showStep('step4');
        });

        $('btnBackFromError').addEventListener('click', () => {
            state = {
                visitorId: state.visitorId,
                nick: '',
                characterData: null,
                fullName: '',
                phone: '',
                verificationCode: '',
                currentStep: 1
            };
            $('inputNick').value = '';
            $('inputName').value = '';
            $('inputPhone').value = '';
            updateProgress(1);
            showStep('step1');
        });

        // Enter para submeter
        $('inputNick').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') $('btnStep1').click();
        });
        $('inputName').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') $('btnStep2').click();
        });
        $('inputPhone').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') $('btnStep3').click();
        });

        // Init
        buildCountryDropdown();
        const savedLang = localStorage.getItem('blackout_lang') || 'pt';
        setLanguage(savedLang);
        logToSheet('page_view', { lang: savedLang });
    </script>
</body>
</html>
